#!/bin/bash

# MateOS Dashboard
# Dashboard visual del sistema MateOS

MATEOS_PATH="${MATEOS_PATH:-$HOME/.local/share/mateOS}"
DASHBOARD_LOG="$HOME/.local/state/mateOS/logs/dashboard.log"

# Crear directorios necesarios
mkdir -p "$(dirname "$DASHBOARD_LOG")"

# FunciÃ³n para mostrar dashboard principal
show_dashboard() {
    clear
    echo "ğŸ–¥ï¸  MateOS Dashboard"
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo "ğŸ• $(date)"
    echo ""
    
    # Estado del sistema
    echo "ğŸ“Š Estado del Sistema:"
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    mateos-monitor status
    echo ""
    
    # Recursos
    echo "ğŸ’» Recursos:"
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    mateos-monitor resources
    echo ""
    
    # Configuraciones
    echo "âš™ï¸  Configuraciones:"
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    mateos-monitor configs
    echo ""
    
    # Respaldos
    echo "ğŸ’¾ Respaldos:"
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    mateos-monitor backups
    echo ""
    
    # Plugins
    echo "ğŸ”Œ Plugins:"
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    mateos-monitor plugins
    echo ""
}

# FunciÃ³n para dashboard interactivo
interactive_dashboard() {
    while true; do
        show_dashboard
        echo ""
        echo "ğŸ’¡ Comandos disponibles:"
        echo "  [r] Refrescar  [m] Monitor  [a] Alertas  [o] Optimizar  [q] Salir"
        echo ""
        read -p "Selecciona una opciÃ³n: " choice
        
        case "$choice" in
            "r"|"R")
                continue
                ;;
            "m"|"M")
                mateos-monitor all
                read -p "Presiona Enter para continuar..."
                ;;
            "a"|"A")
                mateos-alerts full
                read -p "Presiona Enter para continuar..."
                ;;
            "o"|"O")
                mateos-optimize stats
                read -p "Presiona Enter para continuar..."
                ;;
            "q"|"Q")
                echo "ğŸ‘‹ Â¡Hasta luego!"
                break
                ;;
            *)
                echo "âŒ OpciÃ³n no vÃ¡lida"
                sleep 1
                ;;
        esac
    done
}

# FunciÃ³n principal
case "$1" in
    "show")
        show_dashboard
        ;;
    "interactive"|"i")
        interactive_dashboard
        ;;
    *)
        echo "ğŸ–¥ï¸  MateOS Dashboard"
        echo ""
        echo "Uso: mateos-dashboard <comando>"
        echo ""
        echo "Comandos:"
        echo "  show        - Mostrar dashboard una vez"
        echo "  interactive - Dashboard interactivo"
        echo ""
        echo "Ejemplos:"
        echo "  mateos-dashboard show"
        echo "  mateos-dashboard interactive"
        ;;
esac
